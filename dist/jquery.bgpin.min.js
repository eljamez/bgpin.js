(function(e){jQuery.fn.bgpin=function(){function d(e,t){if(e=="in"){t.fadeIn()}if(e=="out"){t.fadeOut()}}var t=e(window),n=e(this),r=n.find(".bgpin-single").length,i={},s,o,u=n.offset(),a=Math.round(u.top),f=a+n.outerHeight(),l=n.find(".bgpin-single:last-of-type"),c=l.offset(),h=Math.round(c.top),p=Math.round(t.outerHeight(true)/2);e.each(n.find(".bgpin-single"),function(t,s){var o=e(s).offset();i[t]={background_image:e(s).css("background-image"),tops:Math.round(o.top)};e(s).css({"background-image":"none","z-index":r+10});var u="background-size: cover; height: 100vh; position: absolute; top:0; width:100%;";var a="";e.each(i,function(e,t){var n=r+(r-e);a+="<div class='background_imgs background_imgs-"+(parseInt(e)+1)+"' style='background-image: "+t["background_image"]+"; z-index:"+n+";"+u+"'></div>\n"});n.append(a)});t.scroll(function(){s=t.scrollTop();if(s>=a&&s<h){e(".background_imgs").css({position:"fixed"});if(s>=h-p&&s<f){e(".background_imgs").addClass("bg-hidden")}}else{e(".background_imgs").css({position:"absolute"});e(".background_imgs-"+r).css({bottom:0,top:"auto"})}});e.each(e(".background_imgs"),function(n,r){if(i[n]!==undefined){t.scroll(function(){last_check=!!i[n+1]?i[n+1]["tops"]-p:f;if(s>=i[n]["tops"]-p&&s<last_check){d("out",e(".background_imgs:not(.background_imgs-"+(parseInt(n)+1)+")"));d("in",e(".background_imgs-"+(parseInt(n)+1)))}})}})}})(jQuery)